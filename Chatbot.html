<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IE 3038 P.C.Guzm√°n - Chatbot</title>
    <style>

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f9;
            height: 100vh;
            display: flex;
            justify-content: center;
        }
        #chat-container {
            width: 100%;
            max-width: 600px;
            height: 100%;
            background-color: #ffffff;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        header {
            background-color: #0056b3; /* Azul Institucional */
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 1.1rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        #chat-box {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .message {
            padding: 12px 16px;
            border-radius: 12px;
            max-width: 85%;
            line-height: 1.5;
            font-size: 0.95rem;
            animation: fadeIn 0.3s ease;
            word-wrap: break-word;
        }
        .bot-msg {
            background-color: #e9ecef;
            color: #333;
            align-self: flex-start;
            border-bottom-left-radius: 2px;
        }
        .user-msg {
            background-color: #0056b3;
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 2px;
        }
   
        .bot-msg a { color: #0056b3; font-weight: bold; }
        .user-msg a { color: #fff; text-decoration: underline; }

        footer {
            padding: 15px;
            background-color: #f8f9fa;
            display: flex;
            gap: 10px;
            border-top: 1px solid #ddd;
        }
        input {
            flex: 1;
            padding: 12px;
            border-radius: 25px;
            border: 1px solid #ccc;
            outline: none;
        }
        button {
            padding: 10px 20px;
            background-color: #0056b3;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
        }
        button:hover { background-color: #004494; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <div id="chat-container">
        <header>
            üè´ IE 3038 P.C.Guzm√°n
        </header>

        <div id="chat-box">
            </div>

        <footer>
            <input type="number" id="user-input" placeholder="Escribe el n√∫mero de opci√≥n..." autofocus>
            <button onclick="handleInput()">Enviar</button>
        </footer>
    </div>

    <script>
       
        let currentState = 'main'; 
        let currentMenuSelection = null; 

        const mainMenuText = `
üëã ¬°Hola! ¬°Bienvenido a la IE 3038 P.C.Guzm√°n! Soy ClassMind.
<br><br>
Por favor elige una opci√≥n:<br>
<b>1Ô∏è‚É£</b> Matr√≠culas y Admisiones<br>
<b>2Ô∏è‚É£</b> Horarios y Calendario Acad√©mico<br>
<b>3Ô∏è‚É£</b> Pago y Gesti√≥n Administrativa<br>
<b>4Ô∏è‚É£</b> Eventos y Comunicados<br>
<br>
Escribe el n√∫mero de la opci√≥n que deseas.`;

        const menus = {
          1: {
            title: "üìò <b>Matr√≠culas y Admisiones</b>",
            options: {
              1: "¬øCu√°ndo inicia las inscripciones/matr√≠culas?",
              2: "¬øQu√© documentos necesito para solicitar una vacante?",
              3: "¬øCu√°nto es el costo de la matr√≠cula?",
              4: "¬øCu√°ndo inicia y termina el proceso de matr√≠cula 2026?",
              5: "¬øQu√© se debe hacer si se tiene un ni√±o/a con necesidades especiales?",
              6: "¬øCu√°l es la edad normativa para determinar el grado?",
              7: "¬øQu√© criterios se toman si hay m√°s postulantes que vacantes?",
              8: "¬øQu√© documentos entregar para matr√≠cula 2026?",
              9: "Preguntas Frecuentes, Recuperaci√≥n y Traslado"
            },
            responses: {
              1: "Inicia desde diciembre hasta febrero. FUT oficial: https://drive.google.com/file/d/1LLvUslWn6w5tqhW5zkdxIPwKyUqNCnmQ/view?usp=sharing",
              2: "Necesita: Informe de progresos, Copias de DNI (Estudiante, padres), Partida de nacimiento. ¬°Todo en mica gruesa oficio!",
              3: "La matr√≠cula es <b>TOTALMENTE GRATUITA</b>.",
              4: "Ver cuadro de fechas: https://drive.google.com/file/d/1k0bpnElml93v9YOhHXNsw1Z8xZI8Mkij/view?usp=sharing",
              5: "Presentar informe neuropsicol√≥gico y documentos del numeral 4.",
              6: "Ver detalles de edad normativa: https://drive.google.com/file/d/1fhJ-EjRVAyZ9BXE5hUlZw2ajJmLnYSNM/view?usp=sharing",
              7: "Criterios de vulnerabilidad: https://drive.google.com/file/d/158bMR1WOAzmiGHDhcwaIaVLJp-eTuHVX/view?usp=sharing",
              8: "Ficha √önica (FUM), Certificado de estudios, Informe 2025, DNI.",
              9: "Preguntas frecuentes PDF: https://drive.google.com/file/d/1mc0XxkdV1h3eowNyzh7KGPj3kFzND6XQ/view?usp=sharing"
            }
          },
          2: {
            title: "üìÖ <b>Horarios y Calendario Escolar</b>",
            options: {
              1: "Horario de atenci√≥n al p√∫blico",
              2: "Vacaciones y feriados"
            },
            responses: {
              1: "El horario de atenci√≥n es de Lunes a Viernes, de 8:30 a.m. a 1:30 p.m.",
              2: "Vacaciones del 21 Jul al 3 Ago. Feriados: https://www.gob.pe/feriados"
            }
          },
          3: {
            title: "üíº <b>Pago y Gesti√≥n Administrativa</b>",
            options: {
              1: "¬øC√≥mo solicito el Certificado de Estudios?",
              2: "¬øLa matr√≠cula ser√° presencial, virtual o mixta?"
            },
            responses: {
              1: "Solic√≠telo aqu√≠: https://certificado.minedu.gob.pe/ (opci√≥n 1).",
              2: "Es 100% presencial."
            }
          },
          4: {
            title: "üéâ <b>Eventos y Comunicados</b>",
            options: {
              1: "¬øCu√°ndo ser√° la pr√≥xima reuni√≥n de Padres?",
              2: "Contacto con la instituci√≥n"
            },
            responses: {
              1: "Revise nuestro Facebook: https://web.facebook.com/institucioneducativa3038",
              2: "Tel√©fono: 01 777-7777 | Correo: institucioneducativa3038@gmail.com"
            }
          }
        };

        const chatBox = document.getElementById('chat-box');
        const userInput = document.getElementById('user-input');

        window.onload = () => {
            addMessage(mainMenuText, 'bot-msg');
        };

        function handleInput() {
            const text = userInput.value.trim();
            if (text === "") return;

            addMessage(text, 'user-msg');
            userInput.value = "";

            setTimeout(() => {
                processBotLogic(text);
            }, 500);
        }

        function processBotLogic(input) {
            
            if (input === "0") {
                currentState = 'main';
                currentMenuSelection = null;
                addMessage("üîô Volviendo al men√∫ principal...", 'bot-msg');
                setTimeout(() => addMessage(mainMenuText, 'bot-msg'), 500);
                return;
            }

            if (currentState === 'main') {
                if (menus[input]) {
    
                    currentState = 'submenu';
                    currentMenuSelection = input;
                    
                    const selectedMenu = menus[input];
                    let msg = `${selectedMenu.title}<br>Elige una pregunta:<br><br>`;
    
                    for (const [key, opt] of Object.entries(selectedMenu.options)) {
                        msg += `<b>${key}.</b> ${opt}<br>`;
                    }
                    msg += `<br>üîô Escribe <b>0</b> para volver al inicio.`;
                    
                    addMessage(msg, 'bot-msg');
                } else {
                    addMessage("‚ö†Ô∏è Por favor elige una opci√≥n v√°lida (1-4).", 'bot-msg');
                }
            } 

            else if (currentState === 'submenu') {
                const menuData = menus[currentMenuSelection];
                
                if (menuData.responses[input]) {
                    const respuesta = menuData.responses[input];
                    addMessage(respuesta + "<br><br>üîô Para regresar al men√∫ principal escribe <b>0</b>.", 'bot-msg');
                } else {
                    addMessage("‚ö†Ô∏è Opci√≥n no v√°lida. Escribe el n√∫mero de la pregunta o <b>0</b> para volver.", 'bot-msg');
                }
            }
        }

        function addMessage(text, className) {
            const div = document.createElement('div');
            div.className = `message ${className}`;
            
            const urlRegex = /(https?:\/\/[^\s]+)/g;
            const textWithLinks = text.replace(urlRegex, function(url) {
                return `<a href="${url}" target="_blank">${url}</a>`;
            });

            div.innerHTML = textWithLinks;
            
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
        }
        
        userInput.addEventListener("keypress", function(e) {
            if (e.key === "Enter") handleInput();
        });

    </script>
</body>

</html>
